const weddingTranslations = {
    "en": {
        "invite-subtext": "An invitation just for you!",
        "groom-name": "Elvis",
        "bride-name": "Maritta",
        "counter-week": "Weeks",
        "counter-days": "Days",
        "counter-hrs": "Hours",
        "counter-min": "Minutes",
        "counter-sec": "Seconds",
        "date-hint": "Caress the roses to find out the date!",
        "bible-quote-1": "\"Many waters cannot quench love; rivers cannot sweep it away. If one were to give all the wealth of one's house for love, it would be utterly scorned.\"",
        "bible-verse-1": "— Song of Songs Chapter 8 Verse 7",
        "event-1-title": "Madhuram Veppu",
        "event-1-subtitle": "Pre-Wedding Celebration",
        "event-1-desc": "Join us for the traditional Madhuram Veppu ceremony, a beautiful pre-wedding celebration filled with joy, family, and cherished traditions.",
        "event-1-venue": "[Venue Name & Address]",
        "event-add-to-calendar": " Add to Calendar",
        "event-theme-title": "Event Theme:",
        "bible-quote-2": "\"Therefore what God has joined together, let no one separate.\"",
        "bible-verse-2": "— Mark 10:9",
        "event-2-title": "Our Wedding Ceremony",
        "event-2-subtitle": "The Main Event",
        "event-2-desc": "We joyfully invite you to celebrate our wedding as we make our vows before God and our loved ones. This sacred moment marks the beginning of our journey together.",
        "event-2-venue": "St. Anthony of Padua RC Church, Ras Al Khaimah, UAE",
        "bible-quote-3": "\"Love is patient, love is kind. It does not envy, it does not boast, it is not proud.\"",
        "bible-verse-3": "— 1 Corinthians 13:4",
        "event-3-title": "Ajman Reception",
        "event-3-subtitle": "Celebration in the Emirates",
        "event-3-desc": "Join us for an evening of celebration, delicious food, and joyful dancing as we kick off our new life together.",
        "bible-quote-4": "\"Rejoice in the Lord always. I will say it again: Rejoice!\"",
        "bible-verse-4": "— Philippians 4:4",
        "event-4-title": "Thiroor Reception",
        "event-4-subtitle": "Homecoming Celebration",
        "event-4-desc": "Join us for a joyous homecoming reception with family and friends from our beloved Thrissur. This celebration brings together our roots and loved ones."
    },
    "ar": {
        "invite-subtext": "دعوة خاصة لك!",
        "groom-name": "إلفيس",
        "bride-name": "ماريتا",
        "counter-week": "أسابيع",
        "counter-days": "أيام",
        "counter-hrs": "ساعات",
        "counter-min": "دقائق",
        "counter-sec": "ثواني",
        "date-hint": "داعب الورود لمعرفة التاريخ!",
        "bible-quote-1": "\"مياه كثيرة لا تستطيع أن تطفئ المحبة، والسيول لا تغمرها. إن أعطى الإنسان كل ثروة بيته بدلا من المحبة، تحتقر احتقارا.\"",
        "bible-verse-1": "— نشيد الأنشاد ٨: ٧",
        "event-1-title": "مادورام فيبو",
        "event-1-subtitle": "احتفال ما قبل الزفاف",
        "event-1-desc": "انضموا إلينا في حفل مادورام فيبو التقليدي، وهو احتفال جميل يسبق الزفاف ومليء بالبهجة والعائلة والتقاليد العزيزة.",
        "event-1-venue": "[اسم المكان والعنوان]",
        "event-add-to-calendar": " أضف إلى التقويم",
        "event-theme-title": "ثيم الحفل:",
        "bible-quote-2": "\"فَالَّذِي جَمَعَهُ اللهُ لاَ يُفَرِّقُهُ إِنْسَانٌ.\"",
        "bible-verse-2": "— مرقس ١٠: ٩",
        "event-2-title": "حفل زفافنا",
        "event-2-subtitle": "الحدث الرئيسي",
        "event-2-desc": "ندعوكم بكل سرور للاحتفال بزفافنا حيث نتبادل العهود أمام الله وأحبائنا. هذه اللحظة المقدسة تمثل بداية رحلتنا معاً.",
        "event-2-venue": "كنيسة القديس أنطونيوس البدواني الكاثوليكية، رأس الخيمة، الإمارات",
        "bible-quote-3": "\"اَلْمَحَبَّةُ تَتَأَنَّى وَتَرْفُقُ. الْمَحَبَّةُ لاَ تَحْسِدُ. الْمَحَبَّةُ لاَ تَتَفَاخَرُ، وَلاَ تَنْتَفِخُ.\"",
        "bible-verse-3": "— ١ كورنثوس ١٣: ٤",
        "event-3-title": "حفل استقبال عجمان",
        "event-3-subtitle": "احتفال في الإمارات",
        "event-3-desc": "انضموا إلينا في أمسية من الاحتفال والطعام اللذيذ والرقص المبهج ونحن نبدأ حياتنا الجديدة معاً.",
        "bible-quote-4": "\"افرحوا في الرب كل حين، وأقول أيضاً افرحوا!\"",
        "bible-verse-4": "— فيلبي ٤: ٤",
        "event-4-title": "حفل استقبال ثيرور",
        "event-4-subtitle": "احتفال العودة إلى الوطن",
        "event-4-desc": "انضموا إلينا في حفل استقبال مبهج مع العائلة والأصدقاء من تريشور الحبيبة. هذا الاحتفال يجمع جذورنا وأحبائنا."
    },
    "hi": {
        "invite-subtext": "विशेष रूप से आपके लिए एक निमंत्रण!",
        "groom-name": "एल्विस",
        "bride-name": "मैरिटा",
        "counter-week": "सप्ताह",
        "counter-days": "दिन",
        "counter-hrs": "घंटे",
        "counter-min": "मिनट",
        "counter-sec": "सेकंड",
        "date-hint": "तारीख जानने के लिए गुलाबों को छुएं!",
        "bible-quote-1": "\"प्रेम को तो बहुत सा पानी भी नहीं बुझा सकता, और न वह महानद में डूब सकता है। यदि कोई अपने घर की सारी संपत्ति प्रेम के बदले दे दे, तो भी वह तुच्छ ही ठहरेगी।\"",
        "bible-verse-1": "— श्रेष्ठगीत 8:7",
        "event-1-title": "मधुरम वेप्पु",
        "event-1-subtitle": "शादी से पहले का उत्सव",
        "event-1-desc": "पारंपरिक मधुरम वेप्पु समारोह के लिए हमारे साथ जुड़ें, जो खुशी, परिवार और पोषित परंपराओं से भरा एक सुंदर प्री-वेडिंग उत्सव है।",
        "event-1-venue": "[स्थान का नाम और पता]",
        "event-add-to-calendar": " कैलेंडर में जोड़ें",
        "event-theme-title": "कार्यक्रम की थीम:",
        "bible-quote-2": "\"इसलिए जिसे परमेश्वर ने जोड़ा है, उसे कोई अलग न करे।\"",
        "bible-verse-2": "— मरकुस 10:9",
        "event-2-title": "हमारा विवाह समारोह",
        "event-2-subtitle": "मुख्य कार्यक्रम",
        "event-2-desc": "हम आपको अपनी शादी का जश्न मनाने के लिए खुशी-खुशी आमंत्रित करते हैं क्योंकि हम भगवान और अपने प्रियजनों के सामने अपनी मन्नतें मांगते हैं।",
        "event-2-venue": "सेंट एंथोनी ऑफ पादुआ आरसी चर्च, रस अल खैमाह, यूएई",
        "bible-quote-3": "\"प्रेम धीरजवन्त है, और कृपालु है; प्रेम डाह नहीं करता; प्रेम अपनी बड़ाई नहीं करता, और फूलता नहीं।\"",
        "bible-verse-3": "— 1 कुरिन्थियों 13:4",
        "event-3-title": "अजमान रिसेप्शन",
        "event-3-subtitle": "अमीरात में जश्न",
        "event-3-desc": "जश्न, स्वादिष्ट भोजन और आनंदमय नृत्य की शाम के लिए हमारे साथ जुड़ें क्योंकि हम अपने नए जीवन की शुरुआत कर रहे हैं।",
        "bible-quote-4": "\"प्रभु में सदा आनन्दित रहो; मैं फिर कहता हूँ, आनन्दित रहो!\"",
        "bible-verse-4": "— फिलिप्पियों 4:4",
        "event-4-title": "थिरूर रिसेप्शन",
        "event-4-subtitle": "घर वापसी का जश्न",
        "event-4-desc": "हमारे प्यारे त्रिशूर के परिवार और दोस्तों के साथ एक सुखद स्वागत समारोह में शामिल हों। यह उत्सव हमारी जड़ों और प्रियजनों को एक साथ लाता है।"
    },
    "ml": {
        "invite-subtext": "നിങ്ങൾക്കായി ഒരു പ്രത്യേക ക്ഷണം!",
        "groom-name": "എൽവിസ്",
        "bride-name": "മറിറ്റ",
        "counter-week": "ആഴ്ചകൾ",
        "counter-days": "ദിവസങ്ങൾ",
        "counter-hrs": "മണിക്കൂറുകൾ",
        "counter-min": "മിനിറ്റുകൾ",
        "counter-sec": "സെക്കൻഡുകൾ",
        "date-hint": "തിയതി അറിയാൻ റോസാപ്പൂക്കളിൽ തൊടുക!",
        "bible-quote-1": "\"സ്നേഹത്തെ അണച്ചു കളവാൻ വെള്ളപ്പൊക്കത്തിന്നു കഴിയുകയില്ല, നദികൾ അതിനെ മുക്കിക്കളയുകയുമില്ല. ഒരുവൻ തൻറെ വീട്ടിലെ സർവ്വ സമ്പത്തും സ്നേഹത്തിന്നു പകരം കൊടുത്താലും അതിനെ നിസ്സാരമായി വിചാരിക്കും.\"",
        "bible-verse-1": "— ഉത്തമഗീതം 8:7",
        "event-1-title": "മധുരം വെപ്പ്",
        "event-1-subtitle": "വിവാഹത്തിന് മുന്നോടിയായുള്ള ചടങ്ങ്",
        "event-1-desc": "സന്തോഷവും കുടുംബവും പ്രിയപ്പെട്ട പാരമ്പര്യങ്ങളും നിറഞ്ഞ മനോഹരമായ മധുരം വെപ്പ് ചടങ്ങിലേക്ക് നിങ്ങളെ സ്വാഗതം ചെയ്യുന്നു.",
        "event-1-venue": "[സ്ഥലത്തിന്റെ പേരും വിലാസവും]",
        "event-add-to-calendar": " കലണ്ടറിൽ ചേർക്കുക",
        "event-theme-title": "ചടങ്ങിന്റെ തീം:",
        "bible-quote-2": "\"ദൈവം യോജിപ്പിച്ചത് മനുഷ്യൻ വേർപിരിക്കാതിരിക്കട്ടെ.\"",
        "bible-verse-2": "— മർക്കോസ് 10:9",
        "event-2-title": "വിവാഹ കർമ്മം",
        "event-2-subtitle": "പ്രധാന ചടങ്ങ്",
        "event-2-desc": "ദൈവത്തിന്റെയും പ്രിയപ്പെട്ടവരുടെയും സാന്നിധ്യത്തിൽ ഞങ്ങൾ വിവാഹിതരാകുന്ന ഈ വിശുദ്ധ നിമിഷത്തിൽ നിങ്ങളുടെ സാന്നിധ്യം ആഗ്രഹിക്കുന്നു.",
        "event-2-venue": "സെന്റ് ആന്തണി ഓഫ് പാദുവ ചർച്ച്, റാസൽഖൈമ, യുഎഇ",
        "bible-quote-3": "\"സ്നേഹം ദീർഘമായി ക്ഷമിക്കുന്നു, ദയ കാണിക്കുന്നു; സ്നേഹം സ്പർദ്ധിക്കുന്നില്ല, സ്നേഹം വമ്പു പറയുന്നില്ല, ചീർക്കുന്നില്ല.\"",
        "bible-verse-3": "— 1 കൊരിന്ത്യർ 13:4",
        "event-3-title": "അജ്മാൻ റിസപ്ഷൻ",
        "event-3-subtitle": "എമിറേറ്റിലെ ആഘോഷം",
        "event-3-desc": "ഞങ്ങളുടെ പുതിയ ജീവിതത്തിന്റെ തുടക്കം ആഘോഷമാക്കാൻ രുചികരമായ ഭക്ഷണവും നൃത്തവും നിറഞ്ഞ ഈ വൈകുന്നേരത്തേക്ക് സ്വാഗതം.",
        "bible-quote-4": "\"കർത്താവിൽ എപ്പോഴും സന്തോഷിക്കുവിൻ; സന്തോഷിക്കുവിൻ എന്ന് ഞാൻ വീണ്ടും പറയുന്നു!\"",
        "bible-verse-4": "— ഫിലിപ്പിയർ 4:4",
        "event-4-title": "തിരൂർ റിസപ്ഷൻ",
        "event-4-subtitle": "നാട്ടിലെ സ്വീകരണം",
        "event-4-desc": "ഞങ്ങളുടെ ജന്മനാടായ തൃശ്ശൂരിലെ ബന്ധുക്കളോടും സുഹൃത്തുക്കളോടും ഒപ്പമുള്ള സന്തോഷകരമായ സ്വീകരണ ചടങ്ങിലേക്ക് സ്വാഗതം."
    }
};

/**
 * updates the content of the page based on the language code
 * @param {string} langCode - 'en', 'ar', 'hi', or 'ml'
 * @param {string} langName - Display name for the UI
 */
function setLanguage(langCode, langName) {
    // 1. Update UI Label in the Drawer
    const langDisplay = document.getElementById("currentLangDisplay");
    if (langDisplay) {
        langDisplay.innerText = langName;
    }

    document.body.dataset.lang=langCode;

    // 2. Update URL Hash
    // Note: Ensure eventId is defined globally in your other scripts
    const currentEventId = typeof eventId !== 'undefined' ? eventId : 'default';
    window.location.hash = `/e/${currentEventId}/lang/${langCode}`;

    // 3. Perform Translations
    const translations = weddingTranslations[langCode];
    if (translations) {
        // Find all elements that have a data-content-id attribute
        const elementsToTranslate = document.querySelectorAll('[data-content-id]');
        
        elementsToTranslate.forEach(element => {
            const contentId = element.getAttribute('data-content-id');
            if (translations[contentId]) {
                // If the element is the calendar icon span, we want to keep the icon
                if (contentId === 'event-add-to-calendar') {
                    const icon = element.querySelector('i');
                    element.innerText = translations[contentId];
                    if (icon) element.prepend(icon);
                } else {
                    element.innerText = translations[contentId];
                }
            }
        });

        // 4. Handle RTL (Right-to-Left) for Arabic
        document.body.dir = (langCode === 'ar') ? 'rtl' : 'ltr';
        if (langCode === 'ar') {
            document.body.classList.add('rtl-active');
        } else {
            document.body.classList.remove('rtl-active');
        }
    }

    // 5. Hide Modal
    $("#langModal").modal("hide");
    console.log("Language set to:", langCode);
}

// Optional: Auto-detect language from Hash on page load
window.addEventListener('DOMContentLoaded', () => {
    const hash = window.location.hash;
    if (hash.includes('/lang/')) {
        const code = hash.split('/lang/')[1];
        const langMap = { 'en': 'English', 'ar': 'Arabic', 'hi': 'Hindi', 'ml': 'Malayalam' };
        if (langMap[code]) {
            setLanguage(code, langMap[code]);
        }
    }
});